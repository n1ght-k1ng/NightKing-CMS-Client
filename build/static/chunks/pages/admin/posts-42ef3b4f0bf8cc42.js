(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2957],{34608:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts",function(){return t(96024)}])},15330:function(e,n,t){"use strict";var r=t(85893),s=t(67294),i=t(11163);n.Z=function(e){var n=e.path,t=void 0===n?"/":n,a=(0,s.useState)(3),c=a[0],o=a[1],l=(0,i.useRouter)();return(0,s.useEffect)((function(){var e=setInterval((function(){o(c-1)}),1e3);return 0===c&&(clearInterval(e),l.push(t)),function(){return clearInterval(e)}}),[c]),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsxs)("p",{children:[" Redirecting in ",c," seconds"]})})}},87522:function(e,n,t){"use strict";t.d(n,{Z:function(){return E}});var r=t(47568),s=t(34051),i=t.n(s),a=t(85893),c=t(97183),o=t(67294),l=t(19820),u=t(41664),d=t.n(u),h=t(61715),x=t(40730),f=t(42952),m=t(57184),p=t(88916),j=t(71255),v=t(80275),Z=t(87547),w=t(69980),g=l.Z.SubMenu,k=c.Z.Sider,y=function(){var e,n,t=(0,o.useState)(!1),r=t[0],s=t[1],i=(0,o.useState)(""),c=i[0],u=i[1],y=(0,h.Lm)(),N=(0,o.useContext)(x.V),C=N[0];N[1];(0,o.useEffect)((function(){u(window.location.pathname)}),[window.location.pathname]),(0,o.useEffect)((function(){y<650?s(!0):y>650&&s(!1)}),[y<650]);var I=function(e){return"".concat(c===e&&"active")};return(0,a.jsx)(k,{collapsible:!0,collapsed:r,onCollapse:function(){return s(!r)},children:(0,a.jsxs)(l.Z,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:r,children:[(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(f.Z,{}),children:(0,a.jsx)(d(),{href:"/admin",children:(0,a.jsx)("a",{className:I("/admin"),children:"Dashboard"})})},"1"),(0,a.jsxs)(g,{icon:(0,a.jsx)(m.Z,{}),title:"Posts",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(d(),{href:"/admin/posts",children:(0,a.jsx)("a",{className:I("/admin/posts"),children:"All Posts"})})},"3"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(d(),{href:"/admin/posts/new",children:(0,a.jsx)("a",{className:I("/admin/posts/new"),children:"Add New"})})},"4"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(d(),{href:"/admin/categories",children:(0,a.jsx)("a",{className:I("/admin/categories"),children:"Categories"})})},"5")]},"2"),(0,a.jsxs)(g,{icon:(0,a.jsx)(p.Z,{}),title:"Media",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(d(),{href:"/admin/media/library",children:(0,a.jsx)("a",{className:I("/admin/media/library"),children:"Library"})})},"7"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(d(),{href:"/admin/media/new",children:(0,a.jsx)("a",{className:I("/admin/media/new"),children:"Add New"})})},"8")]},"6"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(j.Z,{}),children:(0,a.jsx)(d(),{href:"/admin/comments",children:(0,a.jsx)("a",{className:I("/admin/comments"),children:"Comments"})})},"9"),(0,a.jsxs)(g,{icon:(0,a.jsx)(v.Z,{}),title:"Users",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(d(),{href:"/admin/users",children:(0,a.jsx)("a",{className:I("/admin/users"),children:"All Users"})})},"11"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(d(),{href:"/admin/users/new",children:(0,a.jsx)("a",{className:I("/admin/users/new"),children:"Add New"})})},"12")]},"10"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(Z.Z,{}),children:(0,a.jsx)(d(),{href:"/admin/".concat(null===C||void 0===C||null===(e=C.user)||void 0===e?void 0:e._id),children:(0,a.jsx)("a",{className:I("/admin/".concat(null===C||void 0===C||null===(n=C.user)||void 0===n?void 0:n._id)),children:"Profile"})})},"13"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(w.Z,{}),children:(0,a.jsx)(d(),{href:"/admin/customize",children:(0,a.jsx)("a",{className:I("/admin/customise"),children:"Customize"})})},"14")]})})},N=t(11163),C=t(15330),I=t(9669),_=t.n(I),b=(t(62091),c.Z.Content);var E=function(e){var n=(0,o.useContext)(x.V),t=n[0],s=(n[1],(0,o.useState)(!0)),l=s[0],u=s[1];(0,o.useEffect)((function(){(null===t||void 0===t?void 0:t.token)&&d(),u(!1)}),[null===t||void 0===t?void 0:t.token]);var d=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_().get("/current-admin");case 3:e.sent.data,u(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),h.push("/");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),h=(0,N.useRouter)();return l?(0,a.jsx)(C.Z,{}):(0,a.jsx)(c.Z,{children:(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(y,{}),(0,a.jsx)(b,{style:{padding:"10px"},children:e.children})]})})}},45433:function(e,n,t){"use strict";var r=t(85893),s=t(97259);t(41664);n.Z=function(e){var n=e.posts,t=e.handleDelete,i=e.handleEdit;return(0,r.jsx)(s.ZP,{itemLayout:"horizontal",dataSource:n,renderItem:function(e){return(0,r.jsx)(s.ZP.Item,{actions:[(0,r.jsx)("a",{onClick:function(){return i(e)},children:" edit "}),(0,r.jsx)("a",{onClick:function(){return t(e)},children:" delete "})],children:(0,r.jsx)(s.ZP.Item.Meta,{title:e.title})})}})}},96024:function(e,n,t){"use strict";t.r(n);var r=t(47568),s=t(26042),i=t(69396),a=t(34051),c=t.n(a),o=t(85893),l=t(9669),u=t.n(l),d=t(67294),h=t(76031),x=t(71230),f=t(15746),m=t(71577),p=t(79531),j=t(87522),v=t(41664),Z=t.n(v),w=t(11163),g=t(24969),k=t(45433),y=t(40730);n.default=function(){var e=(0,d.useContext)(h.W),n=e[0],t=e[1],a=(0,w.useRouter)(),l=(0,d.useState)(""),v=l[0],N=l[1],C=n.posts,I=(0,d.useContext)(y.V),_=I[0];I[1],console.log("posts from context",n),(0,d.useEffect)((function(){(null===_||void 0===_?void 0:_.token)&&b()}),[null===_||void 0===_?void 0:_.token]);var b=function(){var e=(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get("/posts-for-admin");case 3:n=e.sent.data,t((function(e){return(0,i.Z)((0,s.Z)({},e),{posts:n})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.push("/admin/posts/".concat(n.slug)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Are you sure you want to delete this post?")){e.next=9;break}return e.next=5,u().delete("/post/".concat(n._id));case 5:e.sent.data.ok&&t((function(e){return(0,i.Z)((0,s.Z)({},e),{posts:e.posts.filter((function(e){return e._id!==n._id}))})})),e.next=10;break;case 9:return e.abrupt("return");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:console.log("Delete",n);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,o.jsx)(j.Z,{children:(0,o.jsx)(x.Z,{children:(0,o.jsxs)(f.Z,{span:24,children:[(0,o.jsx)(m.Z,{type:"primary",style:{margin:"10px 0px 10px 0px"},children:(0,o.jsx)(Z(),{href:"/admin/posts/new",children:(0,o.jsxs)("a",{children:[(0,o.jsx)(g.Z,{})," Add new"]})})}),(0,o.jsxs)("h1",{style:{marginTop:15},children:[" ",null===C||void 0===C?void 0:C.length," Posts "]}),(0,o.jsx)(p.Z,{placeholder:"Search",type:"search",value:v,onChange:function(e){return N(e.target.value.toLowerCase())}}),(0,o.jsx)(k.Z,{posts:C.filter((function(e){return e.title.toLowerCase().includes(v)})),handleEdit:E,handleDelete:P})]})})})}}},function(e){e.O(0,[7643,6135,5567,9835,7259,485,9774,2888,179],(function(){return n=34608,e(e.s=n);var n}));var n=e.O();_N_E=n}]);