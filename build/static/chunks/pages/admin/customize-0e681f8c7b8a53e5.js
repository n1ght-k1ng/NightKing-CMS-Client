(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6866],{51819:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/customize",function(){return t(7543)}])},15330:function(e,n,t){"use strict";var s=t(85893),i=t(67294),r=t(11163);n.Z=function(e){var n=e.path,t=void 0===n?"/":n,a=(0,i.useState)(3),l=a[0],c=a[1],o=(0,r.useRouter)();return(0,i.useEffect)((function(){var e=setInterval((function(){c(l-1)}),1e3);return 0===l&&(clearInterval(e),o.push(t)),function(){return clearInterval(e)}}),[l]),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,s.jsxs)("p",{children:[" Redirecting in ",l," seconds"]})})}},87522:function(e,n,t){"use strict";t.d(n,{Z:function(){return S}});var s=t(47568),i=t(34051),r=t.n(i),a=t(85893),l=t(97183),c=t(67294),o=t(19820),d=t(41664),u=t.n(d),h=t(61715),f=t(40730),x=t(42952),p=t(57184),m=t(88916),v=t(71255),j=t(80275),Z=t(87547),g=t(69980),w=o.Z.SubMenu,b=l.Z.Sider,C=function(){var e,n,t=(0,c.useState)(!1),s=t[0],i=t[1],r=(0,c.useState)(""),l=r[0],d=r[1],C=(0,h.Lm)(),y=(0,c.useContext)(f.V),k=y[0];y[1];(0,c.useEffect)((function(){d(window.location.pathname)}),[window.location.pathname]),(0,c.useEffect)((function(){C<650?i(!0):C>650&&i(!1)}),[C<650]);var I=function(e){return"".concat(l===e&&"active")};return(0,a.jsx)(b,{collapsible:!0,collapsed:s,onCollapse:function(){return i(!s)},children:(0,a.jsxs)(o.Z,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:s,children:[(0,a.jsx)(o.Z.Item,{icon:(0,a.jsx)(x.Z,{}),children:(0,a.jsx)(u(),{href:"/admin",children:(0,a.jsx)("a",{className:I("/admin"),children:"Dashboard"})})},"1"),(0,a.jsxs)(w,{icon:(0,a.jsx)(p.Z,{}),title:"Posts",children:[(0,a.jsx)(o.Z.Item,{children:(0,a.jsx)(u(),{href:"/admin/posts",children:(0,a.jsx)("a",{className:I("/admin/posts"),children:"All Posts"})})},"3"),(0,a.jsx)(o.Z.Item,{children:(0,a.jsx)(u(),{href:"/admin/posts/new",children:(0,a.jsx)("a",{className:I("/admin/posts/new"),children:"Add New"})})},"4"),(0,a.jsx)(o.Z.Item,{children:(0,a.jsx)(u(),{href:"/admin/categories",children:(0,a.jsx)("a",{className:I("/admin/categories"),children:"Categories"})})},"5")]},"2"),(0,a.jsxs)(w,{icon:(0,a.jsx)(m.Z,{}),title:"Media",children:[(0,a.jsx)(o.Z.Item,{children:(0,a.jsx)(u(),{href:"/admin/media/library",children:(0,a.jsx)("a",{className:I("/admin/media/library"),children:"Library"})})},"7"),(0,a.jsx)(o.Z.Item,{children:(0,a.jsx)(u(),{href:"/admin/media/new",children:(0,a.jsx)("a",{className:I("/admin/media/new"),children:"Add New"})})},"8")]},"6"),(0,a.jsx)(o.Z.Item,{icon:(0,a.jsx)(v.Z,{}),children:(0,a.jsx)(u(),{href:"/admin/comments",children:(0,a.jsx)("a",{className:I("/admin/comments"),children:"Comments"})})},"9"),(0,a.jsxs)(w,{icon:(0,a.jsx)(j.Z,{}),title:"Users",children:[(0,a.jsx)(o.Z.Item,{children:(0,a.jsx)(u(),{href:"/admin/users",children:(0,a.jsx)("a",{className:I("/admin/users"),children:"All Users"})})},"11"),(0,a.jsx)(o.Z.Item,{children:(0,a.jsx)(u(),{href:"/admin/users/new",children:(0,a.jsx)("a",{className:I("/admin/users/new"),children:"Add New"})})},"12")]},"10"),(0,a.jsx)(o.Z.Item,{icon:(0,a.jsx)(Z.Z,{}),children:(0,a.jsx)(u(),{href:"/admin/".concat(null===k||void 0===k||null===(e=k.user)||void 0===e?void 0:e._id),children:(0,a.jsx)("a",{className:I("/admin/".concat(null===k||void 0===k||null===(n=k.user)||void 0===n?void 0:n._id)),children:"Profile"})})},"13"),(0,a.jsx)(o.Z.Item,{icon:(0,a.jsx)(g.Z,{}),children:(0,a.jsx)(u(),{href:"/admin/customize",children:(0,a.jsx)("a",{className:I("/admin/customise"),children:"Customize"})})},"14")]})})},y=t(11163),k=t(15330),I=t(9669),N=t.n(I),_=(t(62091),l.Z.Content);var S=function(e){var n=(0,c.useContext)(f.V),t=n[0],i=(n[1],(0,c.useState)(!0)),o=i[0],d=i[1];(0,c.useEffect)((function(){(null===t||void 0===t?void 0:t.token)&&u(),d(!1)}),[null===t||void 0===t?void 0:t.token]);var u=function(){var e=(0,s.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N().get("/current-admin");case 3:e.sent.data,d(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),h.push("/");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),h=(0,y.useRouter)();return o?(0,a.jsx)(k.Z,{}):(0,a.jsx)(l.Z,{children:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(C,{}),(0,a.jsx)(_,{style:{padding:"10px"},children:e.children})]})})}},7543:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var s=t(47568),i=t(34051),r=t.n(i),a=t(85893),l=t(67294),c=t(71230),o=t(15746),d=t(27049),u=t(79531),h=t(71577),f=t(67691),x=t(26042),p=t(69396),m=t(29815),v=t(87522),j=t(16536),Z=t(84551),g=t(88484),w=t(40730),b=t(4657),C=t(11163);var y=function(e){var n=e.redirectToLib,t=void 0!==n&&n,s=e.page,i=void 0===s?"admin":s,r=(0,l.useContext)(w.V),c=r[0],o=(r[1],(0,l.useContext)(b.Y)),d=o[0],u=o[1],f=(0,C.useRouter)(),v={name:"file",action:"".concat("http://localhost:8000/api/","/upload-image-file"),headers:{Authorization:"Bearer ".concat(c.token)},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(j.ZP.success("".concat(e.file.name," file uploaded successfully")),u({images:(0,m.Z)(d.images).concat([e.file.response]),selected:e.file.response,showMediaModal:!1}),t&&f.push("/".concat(i,"/media/library")),console.log("info.file =>",e.file)):"error"===e.file.status&&j.ZP.error("".concat(e.file.name," file upload failed."))}};return(0,a.jsx)(Z.Z,(0,p.Z)((0,x.Z)({},v),{maxCount:1,children:(0,a.jsx)(h.Z,{icon:(0,a.jsx)(g.Z,{}),children:"Click to Upload"})}))},k=t(14924),I=t(63922),N=t(64082),_=t(18429),S=t(9669),P=t.n(S),E=t(86501);var A=function(e){var n,t=e.page,i=void 0===t?"admin":t,c=Z.Z.Dragger,o=(0,l.useContext)(w.V),d=o[0],u=(o[1],(0,l.useContext)(b.Y)),h=u[0],v=u[1],g=(0,l.useState)(!1),C=g[0];g[1],(0,l.useEffect)((function(){var e=function(){var e=(0,s.Z)(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P().get("/media");case 3:n=e.sent.data,v((function(e){return(0,p.Z)((0,x.Z)({},e),{images:n})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var y={name:"file",action:"".concat("http://localhost:8000/api/","upload-image-file"),multiple:!0,headers:{Authorization:"Bearer ".concat(d.token)},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(j.ZP.success("".concat(e.file.name," file uploaded successfully")),v({images:(0,m.Z)(h.images).concat([e.file.response]),selected:e.file.response,showMediaModal:!1})):"error"===e.file.status&&j.ZP.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},S=function(){var e=(0,s.Z)(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P().delete("/media/".concat(n));case 3:t=e.sent.data,console.log(t),t.ok&&v((0,p.Z)((0,x.Z)({},h),{images:h.images.filter((function(e){return e._id!=n})),selected:null})),E.Am.error("Image Deleted successfully"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(c,(0,p.Z)((0,x.Z)({},y),{accept:"image/*",children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(N.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",style:{height:"85px"},children:"Click or drag file to this area to upload"})]})),(0,a.jsx)("br",{})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[null===h||void 0===h||null===(n=h.images)||void 0===n?void 0:n.map((function(e){var n,t,s;return(0,a.jsxs)(I.Z,{children:[(0,a.jsx)(f.Z,{onClick:function(){return v((0,p.Z)((0,x.Z)({},h),{selected:e}))},preview:C,style:(s={paddingTop:5,paddingRight:5},(0,k.Z)(s,"paddingTop",5),(0,k.Z)(s,"marginBottom",50),(0,k.Z)(s,"height","100px"),(0,k.Z)(s,"width","100px"),(0,k.Z)(s,"objectFit","cover"),(0,k.Z)(s,"cursor","pointer"),s),src:e.url}),(0,a.jsx)("br",{}),"author"===i&&(null===e||void 0===e||null===(n=e.postedBy)||void 0===n?void 0:n._id)==(null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t._id)||"admin"===i?(0,a.jsx)(_.Z,{onClick:function(){return S(e._id)},style:{color:"#f5222d "}}):""]})})),(0,a.jsx)("br",{})]})]})},T=t(74687),z=T.Z.TabPane,M=function(){return(0,a.jsxs)(T.Z,{children:[(0,a.jsx)(z,{tab:"Upload File",children:(0,a.jsx)(y,{})},"1"),(0,a.jsx)(z,{tab:"Media Library",children:(0,a.jsx)(A,{})},"2")]})},R=function(){var e=(0,l.useContext)(b.Y),n=e[0],t=(e[1],(0,C.useRouter)()),i=(0,l.useState)(""),a=i[0],c=i[1],o=(0,l.useState)(""),d=o[0],u=o[1],h=(0,l.useState)(!1),f=(h[0],h[1]),x=(0,l.useState)(""),p=x[0],m=x[1];!function(){var e=(0,s.Z)(r().mark((function e(){var s,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=5,P().post("/page",{page:"home",title:a,subtitle:d,fullWidthImage:null===n||void 0===n||null===(s=n.selected)||void 0===s?void 0:s._id});case 5:i=e.sent.data,console.log("Posted data",i),f(!1),E.ZP.success("Saved"),t.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),f(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))}();return{title:a,subtitle:d,fullWidthImage:p,setTitle:c,setSubtitle:u,setfullWidthImage:m}},L=function(){var e=(0,l.useContext)(b.Y),n=e[0],t=(e[1],(0,C.useRouter)()),i=(0,l.useState)(!1),x=i[0],p=i[1],m=R(),j=m.title,Z=m.subtitle,g=m.fullWidthImage,w=m.setTitle,y=m.setSubtitle,k=(m.setfullWidthImage,function(){var e=(0,s.Z)(r().mark((function e(){var s,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=5,P().post("/page",{page:"home",title:j,subtitle:Z,fullWidthImage:null===n||void 0===n||null===(s=n.selected)||void 0===s?void 0:s._id});case 5:i=e.sent.data,console.log("Posted data",i),p(!1),E.ZP.success("Saved"),t.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),p(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}());return(0,a.jsx)(v.Z,{children:(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(o.Z,{span:24,children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)("h1",{children:" Customise Home Page "}),(0,a.jsx)("p",{children:"Set Background image , title and subtitle."})]})}),(0,a.jsxs)(o.Z,{span:18,children:[(0,a.jsx)(M,{}),(0,a.jsx)(u.Z,{style:{margin:"20px 0px 20px 0"},size:"large",placeholder:"Give a title",value:j,onChange:function(e){return w(e.target.value)}}),(0,a.jsx)(u.Z,{style:{margin:"20px 0px 20px 0"},size:"large",placeholder:"Give a subtitle",value:Z,onChange:function(e){return y(e.target.value)}}),(0,a.jsx)(h.Z,{onClick:k,type:"default",style:{margin:"10px 0px 10px 0px"},loading:x,block:!0,children:" Save  "})]}),(0,a.jsx)(o.Z,{span:6,children:(0,a.jsx)("div",{style:{margin:"40px 0px 0px 20px"},children:(null===n||void 0===n?void 0:n.selected)?(0,a.jsx)(f.Z,{width:"100%",src:null===n||void 0===n?void 0:n.selected.url}):g?(0,a.jsx)(f.Z,{width:"100%",src:g.url}):""})})]})})}}},function(e){e.O(0,[7643,6135,5567,8231,7910,4790,6656,4687,301,971,9774,2888,179],(function(){return n=51819,e(e.s=n);var n}));var n=e.O();_N_E=n}]);